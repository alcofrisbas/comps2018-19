{%  extends "webapp/header.html" %}

{% block content %}
    <div>
    {% if title %}
        <h5 class="mt-5" style="display:inline-block">{{ title }}</h5>
    {% else %}
        <h5 class="mt-5" style="display:inline-block">Prompt: {{ prompt }}</h5>
    {% endif %}
    <button type="submit" id="edit-button" class="btn btn-outline-primary" onclick="editUpdate()">
         Edit <span class="oi oi-pencil"></span>
    </button>
    </div>
    {% if not sentences %}
        <p>Start writing here: </p>
    {% endif %}
    <p id = "para" style="padding:1px" contenteditable="false">
    {% for sentence in sentences %}
        {% if not loop.last %}
            <span style="color:black">{{ sentence }}</span><br>
        {% endif %}
    {% endfor %}
    <span style="color:blue">{{ last }}</span>
    </p>

    <form method="post">
        {% csrf_token %}
        <textarea name="text" class="form-control">{{ suggestion }}</textarea><br>
        <button type="submit" class="btn btn-primary btn-lg">Add Sentence</button>
    </form><br>
    <form method="get">
        <button type="submit" class="btn btn-danger btn-sm" name="new" value="true">Start a new story</button>
        <!-- <button type="button" class="btn btn-danger btn-sm" onclick="showSaveInfo()" value="true">Save this story</button> -->
        <button type="button" class="btn btn-danger btn-sm" data-toggle="modal" data-target="#exampleModal" value="true">Save this story</button>
    </form>
    <!-- <form method="post">
        {% csrf_token %}
        <input type="text" name="title" placeholder="Add a title" class="form-control final" value= "{{ title }}"style="display:none"></input><br>
        <button type="submit" class="btn btn-danger btn-sm final" name="save" value="true" style="display:none"> Save</button>
        <button type="button" class="btn btn-danger btn-sm final" onclick="showSaveInfo()"style="display:none">Cancel</button>
    </form> -->

    <!-- Modal -->
    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Save</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            {% if request.user.username %}
                Add a title to save your story:
                <form method="post" style="padding:1px">
                    {% csrf_token %}
                    <input type="text" name="title" placeholder="Add a title" class="form-control final" value= "{{ title }}"></input><br>
                    <button type="submit" class="btn btn-danger btn-sm final" name="save" value="true"> Save</button>
                    <button type="button" class="btn btn-danger btn-sm final" onclick="showSaveInfo()">Cancel</button>
                </form>
            {% else %}
                Please <a href="{% url 'social:begin' 'google-oauth2' %}">login with Google</a> to save your story.
            {% endif %}
          </div>
          <!-- <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            <button type="button" class="btn btn-primary">Save changes</button>
          </div> -->
        </div>
      </div>
    </div>
{% endblock %}
